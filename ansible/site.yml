---
- name: Creating Kube Adm Kubernetes Cluster
  hosts: aws_ec2
  become: true
  roles:
    - dependency-packages
    - kube-packages
    - container-runtime

- name: KubeAdm Init First Control Plpane
  hosts: control_planes[0]
  become: true
  environment:
    KUBECONFIG: "{{kube_config}}"
  roles:
    - kubeadm-init-first-master
    - container-network